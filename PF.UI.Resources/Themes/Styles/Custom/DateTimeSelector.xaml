<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:pf="clr-namespace:PF.UI.Controls;assembly=PF.UI.Controls">

    <Style x:Key="DateTimeSelectorBaseStyle" TargetType="pf:DateTimeSelector">
        <Setter Property="Focusable" Value="False" />
        <Setter Property="Background" Value="{DynamicResource SecondaryBorderBrush}" />
        <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
        <Setter Property="Padding" Value="7,0" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Margin" Value="8 0" />
        <Setter Property="pf:BorderElement.CornerRadius" Value="{StaticResource DefaultCornerRadius}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="pf:DateTimeSelector">
                    <Border x:Name="boder" CornerRadius="{Binding Path=(pf:BorderElement.CornerRadius),RelativeSource={RelativeSource TemplatedParent}}"
       BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}"
       Background="{TemplateBinding Background}"  Margin="{TemplateBinding Margin}">
                        <Grid  MinHeight="100" Margin="{TemplateBinding Padding}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition Width="100"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <Grid Grid.RowSpan="2" x:Name="PART_CheckBox">
                                <CheckBox x:Name="checkbox" VerticalAlignment="Center" HorizontalAlignment="Left" 
                                         Panel.ZIndex="1" Height="{TemplateBinding CheckBoxHeight}" IsChecked="{TemplateBinding IsChecked}" 
                                         Foreground="{DynamicResource TextIconBrush}" Margin="0,0,20,0"   Background="{StaticResource ControlDefultBrush}"  >
                                    <CheckBox.Style>
                                        <Style TargetType="CheckBox">
                                            <Setter Property="FocusVisualStyle">
                                                <Setter.Value>
                                                    <Style>
                                                        <Setter Property="Control.Template">
                                                            <Setter.Value>
                                                                <ControlTemplate>
                                                                    <Rectangle Margin="-4" Opacity="1" SnapsToDevicePixels="true" Stroke="{DynamicResource SecondaryBorderBrush}"  StrokeThickness="2" StrokeDashArray="1 1" RadiusX="5" RadiusY="5" />
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </Setter.Value>
                                            </Setter>
                                            <Setter Property="Background" Value="{StaticResource DeepDarkPrimaryBrush}" />
                                            <Setter Property="BorderBrush" Value="{DynamicResource DarkPrimaryBrush}" />
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="HorizontalAlignment" Value="Center" />
                                            <Setter Property="VerticalAlignment" Value="Center" />
                                            <Setter Property="VerticalContentAlignment" Value="Center" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="CheckBox">
                                                        <ControlTemplate.Resources>
                                                            <Storyboard x:Key="StoryboardCheckedTrue">
                                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.StrokeDashOffset)" Storyboard.TargetName="path">
                                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="0" />
                                                                </DoubleAnimationUsingKeyFrames>
                                                                <!-- 添加Fill属性动画 - 变为背景色 -->
                                                                <ColorAnimation Storyboard.TargetName="pathFill"
                                    Storyboard.TargetProperty="Color"
                                    To="White"  BeginTime="0:0:0.2"
                                    Duration="0:0:0.2" />
                                                            </Storyboard>
                                                            <Storyboard x:Key="StoryboardCheckedFalse">
                                                                <ColorAnimation Storyboard.TargetName="pathFill"
                                        Storyboard.TargetProperty="Color"
                                        To="Transparent"   
                                        Duration="0:0:0.1" />


                                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.StrokeDashOffset)" Storyboard.TargetName="path" BeginTime="0:0:0.2">
                                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="80" />
                                                                </DoubleAnimationUsingKeyFrames>
                                                                <!-- 添加Fill属性动画 - 变为透明 -->

                                                            </Storyboard>
                                                        </ControlTemplate.Resources>
                                                        <Grid x:Name="templateRoot" Background="Transparent" SnapsToDevicePixels="True">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="*" />
                                                            </Grid.ColumnDefinitions>
                                                            <Border Height="{TemplateBinding Height}" Width="{TemplateBinding Height}" Background="{TemplateBinding Background}"  CornerRadius="{TemplateBinding pf:BorderElement.CornerRadius}" />
                                                            <Grid Grid.Column="0"  Height="{TemplateBinding Height}" Width="{TemplateBinding Height}" x:Name="markGrid">
                                                                <Path FlowDirection="LeftToRight" UseLayoutRounding="True" x:Name="path"
                                                                     StrokeDashOffset="0" StrokeDashArray="80,80" Width="30" Height="30"
                                                                     Data="{StaticResource CheckedIcon}" StrokeThickness="1" 
                                                                     Stretch="Uniform" Stroke="{DynamicResource TextIconBrush}">
                                                                    <!-- 添加Fill属性，初始为透明 -->
                                                                    <Path.Fill>
                                                                        <SolidColorBrush x:Name="pathFill" Color="Transparent"/>
                                                                    </Path.Fill>
                                                                </Path>
                                                                <Rectangle x:Name="indeterminateMark" RadiusX="5" RadiusY="5" Fill="{DynamicResource DeepDarkPrimaryBrush}" Margin="2" Opacity="0" />
                                                            </Grid>
                                                            <Border  Height="{TemplateBinding Height}"  Width="{TemplateBinding Height}" x:Name="border"
                                                                    CornerRadius="{TemplateBinding pf:BorderElement.CornerRadius}" BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}" />
                                                            <ContentPresenter x:Name="contentPresenter" Visibility="Collapsed" Grid.Column="1" Focusable="False" 
      HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
      Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" 
      SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
      VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                                                        </Grid>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="HasContent" Value="true">
                                                                <Setter Property="Visibility" TargetName="contentPresenter" Value="Visible" />
                                                            </Trigger>
                                                            <Trigger Property="IsMouseOver" Value="true">
                                                                <Setter Property="BorderBrush" Value="{DynamicResource DarkPrimaryBrush}" />
                                                            </Trigger>
                                                            <MultiTrigger>
                                                                <MultiTrigger.Conditions>
                                                                    <Condition Property="IsChecked" Value="true" />
                                                                    <Condition Property="IsPressed" Value="true" />
                                                                </MultiTrigger.Conditions>
                                                                <Setter Property="Opacity" Value="1" />
                                                            </MultiTrigger>
                                                            <MultiTrigger>
                                                                <MultiTrigger.Conditions>
                                                                    <Condition Property="IsChecked" Value="false" />
                                                                    <Condition Property="IsPressed" Value="true" />
                                                                </MultiTrigger.Conditions>
                                                                <Setter Property="BorderBrush" Value="{DynamicResource DarkPrimaryBrush}" />
                                                            </MultiTrigger>
                                                            <Trigger Property="IsChecked" Value="true">
                                                                <Trigger.EnterActions>
                                                                    <BeginStoryboard Storyboard="{StaticResource StoryboardCheckedTrue}" />
                                                                </Trigger.EnterActions>
                                                                <Trigger.ExitActions>
                                                                    <BeginStoryboard Storyboard="{StaticResource StoryboardCheckedFalse}" />
                                                                </Trigger.ExitActions>
                                                                <Setter Property="Opacity" TargetName="indeterminateMark" Value="0" />
                                                                <Setter Property="Background" Value="{DynamicResource DeepDarkPrimaryBrush}" />
                                                                <Setter Property="BorderBrush" Value="{DynamicResource DarkPrimaryBrush}" />
                                                                <Setter TargetName="border" Property="Visibility" Value="Collapsed" />
                                                            </Trigger>
                                                            <Trigger Property="IsChecked" Value="false">
                                                                <Setter Property="Stroke" Value="{DynamicResource DeepDarkPrimaryBrush}" TargetName="path" />
                                                            </Trigger>
                                                            <Trigger Property="IsChecked" Value="{x:Null}">
                                                                <Setter Property="Opacity" TargetName="indeterminateMark" Value="1" />
                                                            </Trigger>
                                                            <Trigger Property="IsEnabled" Value="False">
                                                                <Setter Property="Opacity" Value="0.4" />
                                                            </Trigger>

                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>

                                    </CheckBox.Style>
                                </CheckBox>
                            </Grid>

                            <TextBlock Grid.Column="1" Margin="0,10,0,0" Text="开始时间：" VerticalAlignment="Center" HorizontalAlignment="Right" Foreground="{TemplateBinding Foreground}" FontSize="{TemplateBinding FontSize}"></TextBlock>

                            <TextBlock Grid.Column="1" Grid.Row="1" Text="结束时间：" VerticalAlignment="Center" HorizontalAlignment="Right" Foreground="{TemplateBinding Foreground}" FontSize="{TemplateBinding FontSize}"></TextBlock>

                            <Border  Grid.Column="2" VerticalAlignment="Center"  Margin="0,10,0,0"
                                    CornerRadius="5" HorizontalAlignment="Stretch" 
                                    Background="{StaticResource BorderBrush}"  BorderThickness="1"  BorderBrush="{StaticResource PrimaryBrush}" >
                                <TextBlock  x:Name="PART_TextBlockStart"  Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Border},Path=ActualWidth}" 
                                           Foreground="{TemplateBinding Foreground}"   FontSize="{StaticResource SecondTitleFontSize}" 
               HorizontalAlignment="Left" VerticalAlignment="Center"    TextAlignment="Left"   Margin="10,0,0,0" Text="{TemplateBinding StartTime,Converter={StaticResource DateTimeToStringConverter},ConverterParameter='yyyy-MM-dd HH:mm:ss'}"  ></TextBlock>
                            </Border>

                            <Border    Grid.Column="2"  Grid.Row="1" VerticalAlignment="Center" 
                                      CornerRadius="5" HorizontalAlignment="Stretch"
                                      Background="{StaticResource BorderBrush}"    BorderThickness="1"  BorderBrush="{StaticResource PrimaryBrush}" >
                                <TextBlock  x:Name="PART_TextBlockEnd"  Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Border},Path=ActualWidth}" 
                                           Foreground="{TemplateBinding Foreground}"  FontSize="{StaticResource SecondTitleFontSize}"
               HorizontalAlignment="Left"  VerticalAlignment="Center"  TextAlignment="Left"   Margin="10,0,0,0" Text="{TemplateBinding EndTime,Converter={StaticResource DateTimeToStringConverter},ConverterParameter='yyyy-MM-dd HH:mm:ss'}"  ></TextBlock>
                            </Border>
                            <Grid  Grid.Column="1" Grid.ColumnSpan="3"  Grid.Row="2"  HorizontalAlignment="Stretch" >

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition></ColumnDefinition>
                                    <ColumnDefinition></ColumnDefinition>
                                    <ColumnDefinition></ColumnDefinition>
                                </Grid.ColumnDefinitions>


                                <RadioButton Grid.Column="0" x:Name="RadioButton1" Tag="DAY"  HorizontalAlignment="Left" VerticalAlignment="Center" Content="当天" Margin="5,0,0,0" Foreground="{TemplateBinding Foreground}" Background="{TemplateBinding Background}" FontSize="{TemplateBinding FontSize}"></RadioButton>
                                <RadioButton Grid.Column="1" x:Name="RadioButton2" Tag="WEEK"  HorizontalAlignment="Center" VerticalAlignment="Center" Content="近一周" Margin="10,0" Foreground="{TemplateBinding Foreground}" Background="{TemplateBinding Background}" FontSize="{TemplateBinding FontSize}"></RadioButton>
                                <RadioButton  Grid.Column="2" x:Name="RadioButton3" Tag="MONTH"  HorizontalAlignment="Right" VerticalAlignment="Center" Content="近一月" Margin="0,0,0,0" Foreground="{TemplateBinding Foreground}" Background="{TemplateBinding Background}" FontSize="{TemplateBinding FontSize}"></RadioButton>

                            </Grid>

                            <Popup x:Name="PART_PopStart" AllowsTransparency="True"   Placement="Bottom" PlacementTarget="{Binding ElementName=PART_TextBlockStart}" StaysOpen="False" >
                                <Border Background="{StaticResource SecondaryBorderBrush}" CornerRadius="10" >
                                    <Border Grid.Row="1">
                                        <pf:CalendarWithListClock  x:Name="StartCalendar" Background="{StaticResource BorderBrush}" Foreground="{TemplateBinding Foreground}" ></pf:CalendarWithListClock>
                                    </Border>
                                </Border>
                            </Popup>


                            <Popup x:Name="PART_PopEnd" AllowsTransparency="True"   Placement="Bottom" PlacementTarget="{Binding ElementName=PART_TextBlockEnd}" StaysOpen="False" >
                                <Border Background="{StaticResource SecondaryBorderBrush}" CornerRadius="10" >
                                    <Border Grid.Row="1">
                                        <pf:CalendarWithListClock x:Name="EndCalendar"  Background="{StaticResource BorderBrush}"  Foreground="{TemplateBinding Foreground}" ></pf:CalendarWithListClock>
                                    </Border>
                                </Border>
                            </Popup>

                        </Grid>


                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsOpen" SourceName="PART_PopStart" Value="true">
                            <Setter Property="IsChecked" TargetName="RadioButton1" Value="{x:Null}"></Setter>
                            <Setter Property="IsChecked" TargetName="RadioButton2" Value="{x:Null}"></Setter>
                            <Setter Property="IsChecked" TargetName="RadioButton3" Value="{x:Null}"></Setter>
                        </Trigger>
                        <Trigger Property="IsOpen" SourceName="PART_PopEnd" Value="true">
                            <Setter Property="IsChecked" TargetName="RadioButton1" Value="{x:Null}"></Setter>
                            <Setter Property="IsChecked" TargetName="RadioButton2" Value="{x:Null}"></Setter>
                            <Setter Property="IsChecked" TargetName="RadioButton3" Value="{x:Null}"></Setter>
                        </Trigger>


                        <Trigger Property="ShowCheckBox"  Value="True">
                            <Setter Property="Visibility" TargetName="PART_CheckBox" Value="Visible"></Setter>
                        </Trigger>
                        <Trigger Property="ShowCheckBox"  Value="False">
                            <Setter Property="Visibility" TargetName="PART_CheckBox" Value="Collapsed"></Setter>
                        </Trigger>

                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="BorderBrush" TargetName="boder" Value="{StaticResource DarkPrimaryBrush}" />
                        </Trigger>
                    </ControlTemplate.Triggers>


                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="pf:DateTimeSelector" BasedOn="{StaticResource DateTimeSelectorBaseStyle}" />
</ResourceDictionary>